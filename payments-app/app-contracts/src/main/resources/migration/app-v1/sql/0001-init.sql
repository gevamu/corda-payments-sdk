CREATE TABLE country (
    iso_code_alpha2 VARCHAR(2) NOT NULL,
    PRIMARY KEY (iso_code_alpha2)
);

CREATE TABLE currency (
    iso_code VARCHAR(3) NOT NULL,
    PRIMARY KEY (iso_code)
);

CREATE TABLE account (
    account VARCHAR(64) NOT NULL,
    account_name VARCHAR(64) NOT NULL,
    bic VARCHAR(16) NOT NULL,
    country VARCHAR(2) NOT NULL REFERENCES country(iso_code_alpha2),
    currency VARCHAR(3) NOT NULL REFERENCES currency(iso_code),
    effective_date DATE NOT NULL,
    expiry_date DATE NOT NULL,
    payment_limit INTEGER NOT NULL,
    PRIMARY KEY (account)
);

CREATE TABLE debtor (
    account VARCHAR(64) NOT NULL UNIQUE REFERENCES account(account)
);

CREATE TABLE creditor (
    account VARCHAR(64) NOT NULL UNIQUE REFERENCES account(account)
);

CREATE TABLE registration (
    participant_id VARCHAR(255) NOT NULL,
    network_id VARCHAR(255) NOT NULL,
    PRIMARY KEY (participant_id)
);

CREATE TABLE payment_details (
    transaction_id VARCHAR(144) NOT NULL,
    output_index INT NOT NULL,
    id UUID NOT NULL,
    timestamp TIMESTAMP NOT NULL,
    end_to_end_id VARCHAR(64) NOT NULL,
    amount NUMERIC(20, 2) NOT NULL,
    currency VARCHAR(3) NOT NULL REFERENCES currency(iso_code),
    creditor VARCHAR(64) NOT NULL REFERENCES creditor(account),
    debtor VARCHAR(64) NOT NULL REFERENCES debtor(account),
    PRIMARY KEY (id)
);

INSERT INTO country(iso_code_alpha2)
VALUES
('CN'),
('GB'),
('HK'),
('LU'),
('SG'),
('US');

INSERT INTO currency(iso_code)
VALUES
('GBP'),
('USD');

INSERT INTO account(account, account_name, bic, country, currency, effective_date, expiry_date, payment_limit)
VALUES
('741071328201', 'ASCENT WAYXXXXXXXXXX', 'HSBCHKHH', 'HK', 'USD', '2022-10-01', '2023-10-01', 1000000),
('260183041178', 'DFACSNSG ACU 260-183041-178', 'HSBCSGSG', 'SG', 'USD', '2022-10-01', '2023-10-01', 1000000),
('LU953740101006823130', 'DFACSNGB MDBK 634-532865-130', 'HSBCLULL', 'LU', 'USD', '2022-10-01', '2023-10-01', 1000000),
('40032862001802', 'Alipay SINGAPORE E-COMMERCE PTE LTD', 'MIDLGB22', 'GB', 'GBP', '2022-10-01', '2023-10-01', 1000000),
('260476940193', 'DFACSNSG ACU 260-476940-193', 'HSBCSGSG', 'SG', 'GBP', '2022-10-01', '2023-10-01', 1000000),
('90000000000001', 'TEST HK CITI', 'CITIHKHX', 'HK', 'USD', '2022-10-01', '2023-10-01', 1000000),
('90000000000003', 'TEST SG DBS', 'DBSSSGSG', 'SG', 'USD', '2022-10-01', '2023-10-01', 1000000),
('90000000000002', 'TEST HK HASE', 'HASEHKHH', 'HK', 'USD', '2022-10-01', '2023-10-01', 1000000),
('90000000000004', 'TEST US CITI', 'CITIUS33', 'US', 'USD', '2022-10-01', '2023-10-01', 1000000),
('500295639201', 'XXXXXXXXX XXXXXXXXX', 'HSBCHKHH', 'HK', 'USD', '2022-10-01', '2023-10-01', 1000000),
('001000389201', 'XXXX XXXX XXXX XXXX', 'HSBCHKHH', 'HK', 'USD', '2022-10-01', '2023-10-01', 1000000),
('LU851670001001775145', 'S-1-1775', 'HSBCLULL', 'LU', 'USD', '2022-10-01', '2023-10-01', 1000000);

INSERT INTO debtor(account)
VALUES
('741071328201'),
('260183041178'),
('LU953740101006823130'),
('40032862001802'),
('260476940193'),
('90000000000001'),
('90000000000003'),
('90000000000002'),
('90000000000004'),
('500295639201'),
('001000389201'),
('LU851670001001775145');

INSERT INTO account(account, account_name, bic, country, currency, effective_date, expiry_date, payment_limit)
VALUES
('004531117838', 'XXXX XXXX XXXX XXXX', 'HSBCHKHH', 'HK', 'USD', '2022-10-01', '2023-10-01', 1000000),
('260028006178', 'DFACSNSG ACU 260-028006-178', 'HSBCSGSG', 'SG', 'USD', '2022-10-01', '2023-10-01', 1000000),
('LU963740101013787130', 'LU HBEU 101-13787-130', 'HSBCLULL', 'LU', 'USD', '2022-10-01', '2023-10-01', 1000000),
('40025050951366', 'ALIPAY GLOBA*BCB', 'MIDLGB22', 'GB', 'GBP', '2022-10-01', '2023-10-01', 1000000),
('GB77MIDL40025050951366', 'ALIPAY GLOBA BCB', 'MIDLGB22', 'GB', 'GBP', '2022-10-01', '2023-10-01', 1000000),
('90000000000005', 'TEST CN BOC', 'BKCHCNBJ', 'CN', 'USD', '2022-10-01', '2023-10-01', 1000000);

INSERT INTO creditor(account)
VALUES
('004531117838'),
('260028006178'),
('LU963740101013787130'),
('40025050951366'),
('GB77MIDL40025050951366'),
('90000000000002'),
('90000000000003'),
('260183041178'),
('90000000000005');
